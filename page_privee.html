<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Inspection Générale</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG SYSTEM - LSPD/BCSO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --bg-dark: #0b1016; /* Très sombre */
            --bg-panel: #151b26;
            --primary: #2c5282; /* Bleu Police */
            --accent: #d69e2e; /* Or Badge */
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --danger: #e53e3e;
            --success: #38a169;
            --border: #2d3748;
        }

        * { box-sizing: border-box; outline: none; }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* --- SIDEBAR --- */
        aside {
            width: 260px;
            background-color: var(--bg-panel);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 20px 0;
        }

        .brand {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border);
            text-align: center;
        }
        .brand h2 { color: var(--accent); margin: 0; letter-spacing: 2px; font-size: 1.4rem; }
        .brand span { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; }

        .menu { flex: 1; margin-top: 20px; }
        .menu-item {
            padding: 15px 25px;
            cursor: pointer;
            color: var(--text-muted);
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .menu-item:hover, .menu-item.active {
            background: rgba(44, 82, 130, 0.2);
            color: var(--accent);
            border-left: 4px solid var(--accent);
        }

        /* --- MAIN CONTENT --- */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-dark);
        }

        header {
            height: 60px;
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
        }

        .clock { font-family: monospace; font-size: 1.1rem; color: var(--accent); }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- WIDGETS --- */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--bg-panel);
            padding: 20px;
            border-radius: 6px;
            border-top: 3px solid var(--primary);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .stat-card h3 { margin: 0; font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; }
        .stat-card .value { font-size: 2rem; font-weight: bold; margin-top: 10px; }

        /* --- TABLES --- */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-panel);
            border-radius: 6px;
            overflow: hidden;
        }
        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .data-table th { background: rgba(0,0,0,0.2); color: var(--accent); font-size: 0.85rem; text-transform: uppercase; }
        .data-table tr:hover { background: rgba(255,255,255,0.02); }

        /* --- BADGES --- */
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
        .badge-lspd { background: rgba(44, 82, 130, 0.3); color: #63b3ed; border: 1px solid #2c5282; }
        .badge-bcso { background: rgba(214, 158, 46, 0.2); color: #ecc94b; border: 1px solid #d69e2e; }
        .status-ok { color: var(--success); }
        .status-warn { color: var(--danger); }

        /* --- FORMS --- */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            background: var(--bg-panel);
            padding: 25px;
            border-radius: 6px;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; color: var(--text-muted); font-size: 0.9rem; }
        .form-control {
            width: 100%;
            padding: 12px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            color: white;
            border-radius: 4px;
        }
        .form-control:focus { border-color: var(--accent); }
        
        button.btn {
            background: var(--accent);
            color: #1a202c;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }
        button.btn:hover { filter: brightness(1.1); }
        button.btn-danger { background: var(--danger); color: white; }
        button.btn-sm { padding: 5px 10px; font-size: 0.8rem; }

        /* --- TOAST NOTIFICATIONS --- */
        #toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .toast {
            background: var(--bg-panel);
            border-left: 4px solid var(--accent);
            padding: 15px 25px;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

    </style>
</head>
<body>

<aside>
    <div class="brand">
        <i class="fas fa-shield-alt" style="font-size: 2rem; color: var(--accent); margin-bottom: 10px;"></i>
        <h2>I.G.P.N</h2>
        <span>Inspection Générale</span>
    </div>
    <div class="menu">
        <div class="menu-item active" onclick="nav('dashboard')"><i class="fas fa-chart-pie"></i> Dashboard</div>
        <div class="menu-item" onclick="nav('agents')"><i class="fas fa-users"></i> Effectifs</div>
        <div class="menu-item" onclick="nav('reports')"><i class="fas fa-file-contract"></i> Nouveau Rapport</div>
        <div class="menu-item" onclick="nav('logs')"><i class="fas fa-terminal"></i> Journal d'audit</div>
    </div>
    <div style="padding: 20px; text-align: center;">
        <button class="btn btn-danger" style="width: 100%;" onclick="window.location.href='Home.html'">Déconnexion</button>
    </div>
</aside>

<main>
    <header>
        <div style="font-weight: bold;">SESSION: <span style="color: var(--accent);">INSPECTEUR PRINCIPAL</span></div>
        <div class="clock" id="clock">12:00:00</div>
    </header>

    <div class="content-area">
        
        <div id="dashboard" class="section active">
            <h2 style="margin-bottom: 20px;">Vue d'ensemble</h2>
            
            <div class="stats-row">
                <div class="stat-card" style="border-top-color: #4299e1;">
                    <h3>Agents Actifs</h3>
                    <div class="value" id="stat-active">0</div>
                </div>
                <div class="stat-card" style="border-top-color: #f6ad55;">
                    <h3>Dossiers en cours</h3>
                    <div class="value" id="stat-cases">12</div>
                </div>
                <div class="stat-card" style="border-top-color: #fc8181;">
                    <h3>Agents Suspendus</h3>
                    <div class="value" id="stat-suspended" style="color: var(--danger);">0</div>
                </div>
                <div class="stat-card" style="border-top-color: #68d391;">
                    <h3>Taux de résolution</h3>
                    <div class="value">87%</div>
                </div>
            </div>

            <h3 style="margin-top: 40px;">Dernières Alertes</h3>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Priorité</th>
                        <th>Sujet</th>
                        <th>Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="alerts-table">
                    </tbody>
            </table>
        </div>

        <div id="agents" class="section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>Gestion des Effectifs (LSPD / BCSO)</h2>
                <input type="text" id="searchAgent" class="form-control" style="width: 300px;" placeholder="Rechercher nom ou matricule..." onkeyup="renderAgents()">
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Matricule</th>
                        <th>Identité</th>
                        <th>Service</th>
                        <th>Grade</th>
                        <th>Statut</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="agents-body">
                    </tbody>
            </table>
        </div>

        <div id="reports" class="section">
            <h2>Création de Dossier Disciplinaire</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>Agent Concerné (Nom / Matricule)</label>
                    <input type="text" class="form-control" id="report-target">
                </div>
                <div class="form-group">
                    <label>Type d'incident</label>
                    <select class="form-control" id="report-type">
                        <option>Non-respect de la hiérarchie</option>
                        <option>Usage d'arme abusif</option>
                        <option>Corruption</option>
                        <option>Conduite dangereuse</option>
                        <option>Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Date de l'incident</label>
                    <input type="date" class="form-control" id="report-date">
                </div>
                <div class="form-group">
                    <label>Preuves (Liens bodycam, photos)</label>
                    <input type="text" class="form-control" placeholder="URL ou ID Preuve">
                </div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Description détaillée des faits</label>
                    <textarea class="form-control" rows="5" id="report-desc"></textarea>
                </div>
                <div style="grid-column: span 2; text-align: right;">
                    <button class="btn" onclick="submitReport()">Enregistrer le dossier</button>
                </div>
            </div>
        </div>

        <div id="logs" class="section">
            <h2>Journal d'Audit Système</h2>
            <div style="background: black; padding: 20px; font-family: monospace; color: #00ff00; height: 500px; overflow-y: auto; border-radius: 6px;" id="console-logs">
                <div>[SYSTEM] Initialisation du module IG... OK</div>
                <div>[SYSTEM] Connexion à la base de données centralisée... OK</div>
                <div>[SYSTEM] Utilisateur authentifié : CMD. 01</div>
            </div>
        </div>

    </div>
</main>

<div id="toast-container"></div>

<script>
    // --- DONNÉES SIMULÉES ---
    let agents = [
        { id: "01", name: "Jack O'Neil", service: "LSPD", rank: "Commandant", status: "Actif" },
        { id: "12", name: "Sarah Connor", service: "BCSO", rank: "Lieutenant", status: "Actif" },
        { id: "88", name: "Rick Grimes", service: "LSPD", rank: "Sergent", status: "Suspendu" },
        { id: "44", name: "John Wick", service: "LSPD", rank: "Officier", status: "Actif" },
        { id: "99", name: "Terry Jeffords", service: "BCSO", rank: "Sergent", status: "Actif" },
    ];

    let alerts = [
        { level: "HAUTE", subject: "Plainte Civile #992", date: "Auj. 10:23" },
        { level: "MOYENNE", subject: "Rapport de tir manquant - Mat. 44", date: "Hier 18:45" },
    ];

    // --- FONCTIONS SYSTÈME ---

    // Navigation
    function nav(sectionId) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');
        
        document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    // Horloge
    setInterval(() => {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleTimeString('fr-FR');
    }, 1000);

    // Initialisation
    window.onload = function() {
        renderAgents();
        renderStats();
        renderAlerts();
    };

    // Affichage des Agents
    function renderAgents() {
        const tbody = document.getElementById('agents-body');
        const search = document.getElementById('searchAgent').value.toLowerCase();
        tbody.innerHTML = '';

        agents.forEach((agent, index) => {
            if(agent.name.toLowerCase().includes(search) || agent.id.includes(search)) {
                const badgeClass = agent.service === 'LSPD' ? 'badge-lspd' : 'badge-bcso';
                const statusColor = agent.status === 'Actif' ? 'status-ok' : 'status-warn';
                const actionBtn = agent.status === 'Actif' 
                    ? `<button class="btn btn-sm btn-danger" onclick="toggleStatus(${index})">Suspendre</button>`
                    : `<button class="btn btn-sm" style="background:#38a169; color:white;" onclick="toggleStatus(${index})">Réactiver</button>`;

                const row = `
                    <tr>
                        <td><strong>${agent.id}</strong></td>
                        <td>${agent.name}</td>
                        <td><span class="badge ${badgeClass}">${agent.service}</span></td>
                        <td>${agent.rank}</td>
                        <td class="${statusColor}">● ${agent.status}</td>
                        <td>${actionBtn}</td>
                    </tr>
                `;
                tbody.innerHTML += row;
            }
        });
    }

    // Toggle Statut Agent
    function toggleStatus(index) {
        const agent = agents[index];
        const oldStatus = agent.status;
        agent.status = agent.status === 'Actif' ? 'Suspendu' : 'Actif';
        
        renderAgents();
        renderStats();
        logAction(`Changement statut agent ${agent.name} (${agent.id}) : ${oldStatus} -> ${agent.status}`);
        showToast(`Statut mis à jour pour ${agent.name}`, agent.status === 'Actif' ? 'success' : 'warning');
    }

    // Soumettre un rapport
    function submitReport() {
        const target = document.getElementById('report-target').value;
        const type = document.getElementById('report-type').value;
        
        if(!target) {
            showToast("Erreur: Veuillez indiquer un agent.", "error");
            return;
        }

        // Ajout à la console et reset
        logAction(`Nouveau rapport créé contre ${target}. Motif : ${type}`);
        
        // Simuler l'ajout dans les stats
        let currentCases = parseInt(document.getElementById('stat-cases').innerText);
        document.getElementById('stat-cases').innerText = currentCases + 1;

        showToast("Dossier enregistré avec succès", "success");
        
        // Reset form
        document.getElementById('report-target').value = "";
        document.getElementById('report-desc').value = "";
        
        // Retour dashboard
        setTimeout(() => {
            // nav('dashboard'); // Optionnel : retour auto
        }, 1000);
    }

    // Stats Dashboard
    function renderStats() {
        const activeCount = agents.filter(a => a.status === 'Actif').length;
        const suspendedCount = agents.filter(a => a.status === 'Suspendu').length;
        
        document.getElementById('stat-active').innerText = activeCount;
        document.getElementById('stat-suspended').innerText = suspendedCount;
    }

    // Alertes Dashboard
    function renderAlerts() {
        const tbody = document.getElementById('alerts-table');
        tbody.innerHTML = '';
        alerts.forEach(alert => {
            const color = alert.level === 'HAUTE' ? 'color: var(--danger)' : 'color: orange';
            tbody.innerHTML += `
                <tr>
                    <td style="${color}; font-weight:bold;">${alert.level}</td>
                    <td>${alert.subject}</td>
                    <td>${alert.date}</td>
                    <td><i class="fas fa-eye" style="cursor:pointer; color:var(--accent);"></i></td>
                </tr>
            `;
        });
    }

    // Système de Logs
    function logAction(text) {
        const consoleDiv = document.getElementById('console-logs');
        const time = new Date().toLocaleTimeString();
        consoleDiv.innerHTML += `<div>[${time}] ${text}</div>`;
        consoleDiv.scrollTop = consoleDiv.scrollHeight; // Auto scroll
    }

    // Système de Toast
    function showToast(message, type = 'normal') {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = 'toast';
        
        let icon = '<i class="fas fa-info-circle"></i>';
        if(type === 'success') icon = '<i class="fas fa-check-circle" style="color:var(--success)"></i>';
        if(type === 'warning') icon = '<i class="fas fa-exclamation-triangle" style="color:orange"></i>';
        if(type === 'error') icon = '<i class="fas fa-times-circle" style="color:var(--danger)"></i>';

        toast.innerHTML = `${icon} <span>${message}</span>`;
        container.appendChild(toast);

        setTimeout(() => {
            toast.style.animation = 'slideIn 0.3s ease reverse'; // Animation sortie (optionnel via CSS mais ici simple remove)
            setTimeout(() => toast.remove(), 300);
        }, 3000);
    }
</script>

</body>
</html>